# =======================================================================================
#  PROGRAMAS DE AUTOINICIO
# =======================================================================================

# --------------------------------------------------
# FONDO Y GESTIÓN DE INACTIVIDAD
#exec-once = hyprpaper
#inicia el daemon para gestion de wallpaper
# exec = swayidle -w \
#   timeout 900 'swaylock -f' \
#   timeout 1200 'systemctl suspend' \
#   resume 'swaymsg "output * dpms on"' \
#   before-sleep 'swaylock -f' &
# exec-once = swayidle -w timeout 900 'quickshell ipc -c caelestia call lock lock' timeout 1200 'systemctl suspend' before-sleep 'quickshell ipc -c caelestia call lock lock' &
# Gestiona inactividad y suspensión:
# - 900s (15 min): bloquea pantalla con swaylock
# - 1200s (20 min): suspende el sistema
# - resume: enciende monitores al despertar
# - before-sleep: bloquea antes de suspender

# --------------------------------------------------
# SERVICIOS DEL SISTEMA
# --------------------------------------------------

exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 
# Polkit: agente gráfico para solicitudes de privilegios administrativos.

exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
# Importa variables de entorno de Wayland al entorno de usuario systemd.

exec-once = /usr/bin/gnome-keyring-daemon --start --components=pkcs11,secrets,ssh
# Llavero de GNOME: almacena contraseñas y credenciales de forma segura.

exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
# Asegura que D-Bus conozca las variables de entorno de Wayland.
# Previene errores en aplicaciones que dependen de portales.


# --------------------------------------------------
# UTILIDADES DE SESIÓN
# --------------------------------------------------

# exec-once = /home/sk1t/.config/hypr/scripts/scripts_hypr/presentation_mode_tray.sh # Desactivado: Reemplazado por módulo nativo de Caelestia
# Icono en la bandeja del sistema para activar/desactivar el modo presentación.

exec-once = cliphist daemon
# Portapapeles persistente. Guarda historial de lo copiado.

exec-once = mako
# Gestor de notificaciones para Wayland.

# exec-once = waybar
exec-once = caelestia shell -d

#ACTIVAR FONDOS ANIMADOS
#exec-once = mpvpaper -o "no-audio loop" HDMI-A-1 /home/sk1t/Descargas/lost-in-the-endless-sky.1920x1080.mp4
 #exec-once = mpvpaper -o "no-audio loop" eDP-1 /home/sk1t/Descargas/lost-in-the-endless-sky.1920x1080.mp4

# Barra de estado/configuración (panel superior).

# exec-once = hyprbar # <--- Desactivado. Gestionado por hyprpm y hyprland.conf
# Barra de estado de hyprland (panel inferior).

#exec-once = nwg-dock-hyprland -i 20 -w 5 -mt 1 -x -c "nwg-drawer"
# Dock estilo GNOME con parámetros personalizados:
# - -i: tamaño de íconos
# - -w: tamaño de la barra
# - -mt: márgenes superiores
# - -x: posición inferior
# - -c: comando alternativo (nwg-drawer para menú)


# --------------------------------------------------
# OPTIMIZACIONES Y RENDIMIENTO
# --------------------------------------------------

exec-once = nvidia-settings --assign GPUPowerMizerMode=1
# GPU NVIDIA en modo "Prefer Maximum Performance".
# Evita que la GPU entre en estados de bajo consumo (P8) que causan bajos FPS.
# Modo 1 = Máximo Rendimiento. Modo 2 = Adaptable.

exec-once = udiskie --tray &
# Montaje automático de dispositivos externos (USB, discos).
# Con icono en la bandeja del sistema.

exec-once = xwaylandvideobridge &
# Proporciona compatibilidad de "screen sharing" para apps X11
# como Discord y OBS bajo Wayland.

exec-once = /usr/lib/xdg-desktop-portal-hyprland
# Portal de escritorio para Hyprland.
# Necesario para compartir pantalla y comunicación entre apps
# (ej. Google Meet, OBS, Flatpaks).

exec-once = /usr/lib/xdg-desktop-portal-gtk
# Portal de escritorio para aplicaciones GTK (necesario para el selector de archivos).

exec-once = systemctl --user import-environment
# Comando adicional para asegurar la sincronización de variables de entorno con systemd.

#exec-once = sudo cpupower frequency-set -g powersave
# (Opcional - Ahorro de energía)
# Fuerza a la CPU a iniciar en modo "powersave".
# GameMode u otras herramientas pueden cambiarlo a "performance" al jugar.

#!!!!!!!!!para que screen sharing funcione necesitas: 
#xwaylandvideobridge + portal + dbus-update-activation-environment”).

exec-once = /usr/bin/hyprpm reload -n
